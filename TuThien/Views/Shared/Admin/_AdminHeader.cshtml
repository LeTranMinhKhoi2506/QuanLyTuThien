@* Admin Header - Top Navigation Bar *@
@{
    var username = Context.Session.GetString("Username");
}

<header class="admin-header">
    <div class="header-left">
        <button class="sidebar-toggle" id="sidebarToggle" onclick="toggleSidebar()">
            <i class="bi bi-list"></i>
        </button>
        <h1 class="page-title">@ViewData["Title"]</h1>
    </div>
    
    <div class="d-flex align-items-center">
        <!-- Notification Bell -->
        <div class="notification-bell" id="notificationBell">
            <button class="notification-bell-btn" onclick="toggleNotificationDropdown()">
                <i class="bi bi-bell"></i>
                <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
            </button>
            
            <div class="notification-dropdown">
                <div class="notification-header">
                    <h6><i class="bi bi-bell me-2"></i>Thông báo</h6>
                    <a class="mark-all-read" onclick="markAllAsRead()">Đánh dấu đã đọc</a>
                </div>
                <div class="notification-body" id="notificationList">
                    <div class="notification-empty">
                        <i class="bi bi-bell-slash"></i>
                        <div>Không có thông báo mới</div>
                    </div>
                </div>
                <div class="notification-footer">
                    <a asp-controller="AdminNotifications" asp-action="Index">Xem tất cả thông báo</a>
                </div>
            </div>
        </div>
    
        <!-- Admin Dropdown -->
        <div class="admin-dropdown" id="adminDropdown">
            <div class="admin-dropdown-toggle" onclick="toggleAdminDropdown()">
                <div class="admin-avatar">
                    @(username?[0].ToString().ToUpper() ?? "A")
                </div>
                <div class="admin-info">
                    <div class="admin-name">@username</div>
                    <div class="admin-role">Administrator</div>
                </div>
                <i class="bi bi-chevron-down"></i>
            </div>
            
            <div class="admin-dropdown-menu">
                <div class="admin-dropdown-header">
                    <div class="avatar-large">
                        <i class="bi bi-person"></i>
                    </div>
                    <div class="name">@username</div>
                    <span class="role-badge">
                        <i class="bi bi-shield-check me-1"></i>Admin
                    </span>
                </div>
                
                <div class="admin-dropdown-body">
                    <a asp-controller="Account" asp-action="Profile" class="admin-dropdown-item">
                        <i class="bi bi-person-circle"></i>
                        <span>Thông tin cá nhân</span>
                    </a>
                    <a asp-controller="AdminDashboard" asp-action="Index" class="admin-dropdown-item">
                        <i class="bi bi-speedometer2"></i>
                        <span>Dashboard</span>
                    </a>
                    <a asp-controller="AdminAudit" asp-action="Index" class="admin-dropdown-item">
                        <i class="bi bi-journal-text"></i>
                        <span>Nhật ký hoạt động</span>
                    </a>
                    
                    <div class="admin-dropdown-divider"></div>
                    
                    <a asp-controller="TrangChu" asp-action="Index" class="admin-dropdown-item">
                        <i class="bi bi-house"></i>
                        <span>Về trang chủ</span>
                    </a>
                    
                    <div class="admin-dropdown-divider"></div>
                    
                    <form method="post" asp-controller="Account" asp-action="Logout" style="margin: 0;">
                        @Html.AntiForgeryToken()
                        <button type="submit" class="admin-dropdown-item danger w-100 border-0 bg-transparent text-start">
                            <i class="bi bi-box-arrow-left"></i>
                            <span>Đăng xuất</span>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</header>
